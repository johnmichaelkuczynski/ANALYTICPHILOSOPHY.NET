# Ask A Philosopher - Philosophical Q&A Application

## Recent Updates (November 2025)
- **NEW: Thesis to World Function** (Nov 13): Added first of six planned fiction-writing functions. Takes non-fiction text with claims about human nature, extracts core thesis, and generates 300-500 word documentary-style fiction depicting a world where the thesis is demonstrably true. Uses two-step Claude Sonnet 4.5 pipeline (thesis extraction → fiction generation) with strict journalistic tone requirements and word-count enforcement.
- **NEW: AI Portraits Generated** (Nov 13): Created professional AI-generated portraits for **George Orwell** (lean angular face, thin mustache, 1940s aesthetic) and **Wilhelm Reich** (wire-rimmed glasses, scholarly appearance, psychoanalyst style). Both portraits installed and live.
- **NEW: Financial Regulation Training** (Nov 13): Kuczynski trained on "History of American Financial Regulation" (**46 chunks** embedded). Expands interdisciplinary coverage into economic history, regulatory policy, and financial systems.
- **NEW: Voltaire Added** (Nov 13): French Enlightenment philosopher and satirist **Voltaire** now available as **52nd conversational figure**. System prompt captures his devastating wit, Deist philosophy, anti-clericalism, and advocacy for tolerance. Training in progress on "Works of Voltaire" (88,638 lines including Candide, Philosophical Dictionary, Letters on England, Micromegas). **287 chunks embedded** (26% complete; 796 chunks remaining).
- **FIXED: Quote Generator Bug** (Nov 13): Quote Generator was showing "Unknown Author" instead of actual names. Fixed backend/frontend to properly display author attribution from database.
- **NEW: Kuczynski Epistemology Q&A** (Nov 13): Added "Ask Me Anything about Epistemology!" (10 chunks). Two massive works prepared: "Russell's Mathematical Philosophy" (419k lines) and "Conception and Causation" (416k lines) - ready for future embedding.
- **Knowledge Base Stats**: **68,106 total chunks** across 251 works from 87 authors. Recent additions: Financial Regulation (46 chunks), Voltaire (287 chunks), Kuczynski (5,369 chunks across 98 sources), Whewell (1,443 chunks), Luther (295 chunks).

## Overview
"Ask A Philosopher" is an application designed for deep philosophical discourse with 52 philosophical and literary figures. It leverages their actual writings and advanced AI to deliver nuanced, contextually rich responses. The platform integrates philosophical papers as foundational texts, enabling the AI to reason and adapt based on user sophistication. It supports multi-author conversations through a Retrieval-Augmented Generation (RAG) system, ensuring each figure's responses are grounded in their respective works. The project aims to offer an accessible and engaging way to explore complex philosophical ideas and literary works, with J.-M. Kuczynski as the default philosopher. The ambition is to provide a robust platform for exploring complex philosophical and literary concepts, enhancing understanding through direct engagement with the 'minds' of history's great thinkers, with significant market potential in education and intellectual discourse.

## User Preferences
- **Response Length Control**: User can type desired response length in words, or leave blank for Auto mode. In Auto mode, philosophers MUST produce 3-5 substantial paragraphs separated by blank lines with multi-layered attack structure: Opening (immediate attack/reframing, 1 para), Mechanism (1-3 paragraphs deploying MULTIPLE layers of distinctive method within these paragraphs - e.g., Nietzsche: genealogy + psychological diagnosis + cultural prognosis + hammer-blow rhetoric combined in 1-3 paras; Marx: material base + class dynamics + dialectic + economic mechanisms; Spinoza: geometric proof + causal necessity + modal analysis + ethical implications), Counterattack/Implications (turn it around, 1 para), and Conclusion (decisive verdict, brief). Mandatory self-audit before responding: paragraph count (3-5 with blank lines), multiple method layers deployed within paragraphs, genealogical tracing when applicable, mechanism shown not asserted, counterattack present, voice matches philosopher's style (visceral/geometric/analytic/dialectical). Worked example provided in system prompts showing Nietzsche combining multiple layers within single paragraphs. Standard: responses must have HORSEPOWER - depth and force to fully deploy intellectual firepower. Single paragraph or polite summaries = automatic failure
- **Quote Control**: User can type any number from 0 to 50 for desired quotes per response (0 for none). Quotes are never mandatory - they're weapons deployed only when they strengthen the philosophical attack.
- **Paper Writing Mode**: Toggle to request formal philosophical papers with academic conventions, proper argumentation, and scholarly language
- **Variation**: Never give the same answer twice.
- **Direct Attack Mandate**: All figures attack problems immediately without preambles, commit decisively without hedging, name specific targets rather than vague references, show mechanisms through visible reasoning, reframe confused questions by rejecting false premises, and deploy quotes as logical weapons rather than decoration.
- **Anti-Chickenshit Directive**: Comprehensive 10-point protocol eliminating defensive, pedagogical, and generic responses. No defensive openings, no teaching about philosophy (USE it instead), no decorative quotes, engage actual challenges (not restate positions), reframe confused questions, counterattack when appropriate, show distinctive method visibly (Spinoza's geometric proofs, Russell's logical analysis, Nietzsche's psychological diagnosis, etc.), commit without hedging, eliminate generic academic voice, and when stuck admit it honestly. Every response tested against quality checklist: Did I attack immediately? Did I USE my philosophy or EXPLAIN it? Did I engage the challenge? Is my distinctive method visible? Could another philosopher have written this? Kuczynski bot serves as gold standard for potent, non-evasive responses.
- **Epistemic Humility Override**: All philosophers are programmed with intellectual honesty protocols requiring them to acknowledge decisive evidence against their positions, admit logical contradictions they cannot resolve, show genuine understanding of challenges, attempt responses using their actual resources, and admit limits when stuck. Intellectual honesty comes FIRST, commitment to views SECOND. Great thinkers update beliefs; defending untenable positions is what mediocrities do.

## System Architecture
The application acts as a centralized knowledge server providing unified access to philosophical and psychoanalytic texts via a secure internal API. It features a 3-column layout without authentication, offering direct access to the chat interface. All philosophical texts are consolidated into a unified "Common Fund" knowledge base.

### UI/UX Decisions
- **Layout**: A unified single-page layout with 3 columns (philosophers sidebar, settings, main content) containing five vertically stacked sections: Ask A Philosopher (chat), Model Builder, Paper Writer, Quote Generator, and Thesis to World. All sections accessible by scrolling on ONE page.
- **Accessibility**: No login required; minimal settings (Response Length, Number of Quotes).
- **Five-Section Design**: Integrates Chat, Model Builder, Paper Writer, Quote Generator, and Thesis to World into a single scrollable page.
- **Visuals**: Animated Kuczynski icon, AI-generated portrait avatars, minimalistic design with elegant typography, dark mode support, and visual section dividers.
- **Features**: "Talk with X" for personalized conversations, "Compare Thinkers" for side-by-side comparisons.

### Technical Implementations
- **Frontend**: React, TypeScript, Wouter, TanStack Query, Shadcn UI, and Tailwind CSS.
- **Backend**: Express.js with Node.js and Drizzle ORM.
- **AI Interaction**: Anthropic Claude Sonnet 4.5 is the primary AI (0.7 temperature), configured for aggressive direct reasoning with a 6-point mandate. Conversation history is maintained, and philosophers can cite their own works.
- **Streaming**: Server-Sent Events (SSE) for real-time word-by-word AI response streaming.
- **Settings**: Users control response length and quote frequency via the settings panel.
- **Cross-Section Content Transfer**: Bidirectional content flow system using dropdown "Send to" arrow buttons on all outputs.
- **Model Builder Section**: Integrated for theory validation and reinterpretations using model-theoretic analysis. Supports custom instructions and iterative refinement.
- **Paper Writer Section**: Integrated for generating formal philosophical papers (up to 1500 words) in an authentic voice, with philosopher selection and topic input.
- **Quote Generator Section**: Extracts quotes from site authors or user-uploaded documents, with tab-based modes for "Site Authors" (with optional query and quantity) and "Upload File" (accepts .txt, .pdf, .doc, .docx up to 5MB, with keyword filtering). Includes intelligent quote extraction, spell correction, sentence validation, and relevance-based quality scoring.
- **Thesis to World Section**: Documentary-style factual accumulation generator that converts non-fiction claims about human nature into chronological incident reports. Two-stage AI pipeline with structured JSON enforcement: (1) Extracts author's thesis from input text or uploaded file (.txt, .pdf, .doc, .docx), (2) Generates 8-12 discrete factual incidents in structured JSON format (date/name/numbers/action/result fields). Features mandatory field validation, programmatic narrative detection (rejects dialogue, character thoughts, scenes), automatic filtering of invalid incidents, and conversion to pure documentary prose. Temperature: 0.3 for factual consistency. Format: "In [DATE], [NAME] [ACTION with NUMBERS]. [RESULT]." Produces chronological factual accumulation demonstrating thesis through observable historical incidents—NOT narrative fiction or research reports. First of six planned fiction-writing functions.
- **Guest User Management**: Session-based storage with auto-generated guest user IDs.
- **RAG System**: Papers are chunked (~250 words), embedded using OpenAI's `text-embedding-ada-002`, and stored in a PostgreSQL database with `pgvector` for semantic search.
- **Unified Knowledge Base**: All philosophical texts from 87 authors (68,060 chunks across 250 unique works) are consolidated into a single "Common Fund".
- **Document Upload Feature**: Users can upload text documents (.txt, .md, .doc, .docx, .pdf up to 1MB) for analysis.
- **ZHI Knowledge Provider Integration**: A secure internal API (`/api/internal/knowledge`) uses HMAC-SHA256 authentication for structured knowledge retrieval with explicit author attribution.

## External Dependencies
- **AI Providers**: Anthropic Claude Sonnet 4.5, OpenAI GPT-4o, DeepSeek, Perplexity.
- **Database**: PostgreSQL (Neon) with pgvector extension.
- **Embeddings**: OpenAI `text-embedding-ada-002`.
- **File Parsing (Quote Generator)**: Multer, pdf-parse, mammoth.